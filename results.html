<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script
            src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.2.0/handlebars.min.js"
            integrity="sha256-fIuSfP8oRbwWG9pRr+FaGfBU62kYY+7YqUsXSCgnYqM="
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://www.jrtapsell.co.uk/res/mdl/custom.css"/>
</head>
<body>
    <script>
      (async () => {
        const id = window.location.pathname.substring(1)

        const templatePromise = fetch("/results.hbs")
          .then(p => p.text())
          .then(p => Handlebars.compile(p))

        const dataPromise = fetch("/api/lookup_bin_days.php?query=" + id)
          .then(p => p.json())

        const data = await dataPromise
        const template = await templatePromise

        document.body.innerHTML = template(data[0])
      })()
    </script>
</body>
</html>