<html>
<head>
    <title>

    </title>
</head>
<body>
<form action="#" id="searchForm">
    <label for="postcode">Postcode</label><input id="postcode" />
    <input type="submit" value="Submit"/>
</form>
<script>
    const submitForm = document.querySelector("#searchForm")
    const postcodeInput = document.querySelector("#postcode")

    async function redrawSearch(search) {
        const encodedSearch = encodeURIComponent(search)
        const payload = await fetch('/api/search_addresses.php?query=' + encodedSearch)
        const payloadData = await payload.json()
        console.log(payloadData)
    }

    submitForm.onsubmit = (e) => {
        redrawSearch(postcodeInput.value)
        e.preventDefault()
        return false
    }
</script>
</body>
</html>